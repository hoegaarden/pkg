#@ load("@ytt:data", "data")

#@ version  = data.values.version
#@ pkgName  = data.values.metadata.name
#@ repoPath = data.values.repoPath
#@ schema   = data.values.components.schemas.dataValues
#@ repo     = data.values.repo
#@ repoRef  = data.values.repoRef
---
apiVersion: data.packaging.carvel.dev/v1alpha1
kind: Package
metadata:
  name: #@ pkgName + "." + version
spec:
  refName: #@ pkgName
  version: #@ version
  releasedAt: 2022-04-15T14:45:32Z
  licenses:
    - "none"
  template:
    spec:
      fetch:
      - git:
          ref: #@ repoRef
          url: #@ repo
          subPath: #@ repoPath
      template:
      - ytt:
          paths:
          - ./
      deploy:
      - kapp: {}
  valuesSchema:
    openAPIv3: #@ schema
